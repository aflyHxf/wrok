<div class="fk-cashInOut-center container-fluid" style="background-color:#F2F2F2;">

  <div class="fk-scrollable row">
    <div class="fk-scrollable-content col-md-12" >
      <page-header title="'银行卡转账'" back="true" background="true" href="'#/cashInOut/cashIn'"></page-header>
    <div class="manual-bgWhite">
        <span class="mp-ls-icon-left"></span>
        <div ng-click="manualPayStatus.showBankcardHintModal()" class="mp-title">充值说明</div>
        <span class="mp-ls-icon-right"></span>
    </div>


      <!-- proposal is exist -->
      <div class="mps-bgWhite mtop10" ng-if="manualPayStatus.isProposal" style="min-height:600px">
          <div style="border-bottom:1px solid #CCC" class="text-center mps-sub-title"><b>申请充值状态</b></div>
          <div class="row" style="margin-top:10px;">
          <div class="col-xs-12 col-md-12">
              <div class="col-xs-4 col-md-4">
                  <div class="pLeft30 mh30" >申请单号</div>
              </div>
              <div class="col-xs-6 col-md-6 mw20">
                  {{manualPayStatus.proposal.proposalId}}
              </div>
          </div>
          <div class="col-xs-12 col-md-12">
              <div class="col-xs-4 col-md-4">
                  <div class="pLeft30 mh30">申请时间</div>
              </div>
              <div class="col-xs-6 col-md-6 mw20">
                  {{manualPayStatus.proposal.createTime | date:'yyyy-MM-dd HH:mm:ss' }}
              </div>
          </div>
          <div class="col-xs-12 col-md-12">
              <div class="col-xs-4 col-md-4">
                  <div class="pLeft30 mh30">有效时间</div>
              </div>
              <div class="col-xs-6 col-md-6 mw20 lightBlueFont">
                  <!-- {{manualPayStatus.proposal.data.validTime | date:'yyyy-MM-dd HH:mm:ss' }} -->
                  {{manualPayStatus.timeLeftText}}
              </div>
          </div>
          <div class="col-xs-12 col-md-12">
              <div class="col-xs-4 col-md-4">
                  <div class="pLeft30 mh30">申请金额</div>
              </div>
              <div class="col-xs-6 col-md-6 mw20 lightBlueFont">
                  {{manualPayStatus.proposal.data.amount}}
              </div>
          </div>
          <div class="col-xs-12 col-md-12">
              <div class="col-xs-4 col-md-4">
                  <div class="pLeft30 mh30">当前状态</div>
              </div>
              <div class="col-xs-6 col-md-6 mw20 lightBlueFont">
                  {{manualPayStatus.proposalStatus[manualPayStatus.proposal.status]}}
              </div>
          </div>
          <div class="col-xs-12 col-md-12">
              <div class="col-xs-4 col-md-4">
                  <div class="pLeft30 mh30">备注栏位</div>
              </div>
              <div class="col-xs-6 col-md-6 mw20 lightBlueFont">
                  {{manualPayStatus.proposal.data.remark}}
              </div>
          </div>


          <div class="col-xs-12 col-md-12">
              <div class="col-xs-4 col-md-4">
                  <div class="pLeft30 mh30">操作</div>
              </div>
              <div class="col-xs-6 col-md-6 mw20">
                  <div class="btn btn-primary lightBlue" ng-click="manualPayStatus.cancelManualTopUp(manualPayStatus.proposal.proposalId)">取消</div>
              </div>
          </div>
          </div>
        </form>

      <div class="mps-bank-info mps-blue-corner">
        <div class="mps-blue-bg">
          <div class="text-center mps-blue-title">
            <h5>捕鱼皇收款银行讯息</h5>
          </div>
          <div>
            <div class="mps-blue-label">银行类型</div>
            <div class="mps-blue-text">{{manualPayStatus.bankTypeListName[manualPayStatus.proposal.data.bankCardType].name || ''}}</div>
          </div>
          <div>
            <div class="mps-blue-label">开户姓名</div>
            <div class="mps-blue-text">{{manualPayStatus.proposal.data.cardOwner}}</div>
          </div>
          <div>
            <div class="mps-blue-label">银行帐号</div>
            <div class="mps-blue-text">{{manualPayStatus.proposal.data.bankCardNo}}</div>
          </div>
        </div>
      </div>
      </div>
      <!-- end of proposal is exist-->

      <!-- apply for manual pay-->
      <div class="mps-bgWhite  mtop10" ng-if="!manualPayStatus.isProposal">
        <div class="mps-content">
        <form class="fk-aliPay-form" name="manualPayForm" >
        <div class="form-group">
          <label>充值姓名 :</label>
          <input type="text"
                 name="topUpName"
                 class="form-control"
                 ng-model="manualPayStatus.userData.realName"
                 disabled />
        </div>


        <div class="form-group mps-gray">
          <label>充值方式 :</label>
          <select class="form-control fk-cashInOut-select mps-gray" ng-change="manualPayStatus.filterBank()" ng-model="manualPayStatus.editData.depositMethod">
            <option ng-repeat="(key,val) in manualPayStatus.bankAccountTypeList" value="{{key}}">{{val}}</option>
          </select>
        </div>

          <div class="form-group" ng-if="manualPayStatus.editData.depositMethod !=4 && manualPayStatus.editData.depositMethod !=5">
                <label>充值银行 ：</label>
                <select class="form-control fk-cashInOut-select mps-gray" ng-model="manualPayStatus.editData.bankTypeId">
                  <option value=""></option>
                  <option ng-repeat="bk in manualPayStatus.bankResult" value="{{bk.id}}">{{bk.name}}</option>
                </select>
          </div>
          <div class="form-group  mps-gray">
              <label>充值账号 ：</label>
              <input type="number"
                     name="lastBankcardNo"
                     ng-model="manualPayStatus.editData.lastBankcardNo"
                     placeholder="账号后3位"
                     class="form-control"
                     required />
              <div class="has-error"
                    ng-messages="manualPayForm.lastBankcardNo.$error"
                    ng-if="manualPayForm.lastBankcardNo.$touched">
                    <div ng-message="required">
                      <div class="popover fade top in" role="tooltip" style="top: -30px;left: 92px;display: block; color: #ff0000;">
                        <div class="arrow" style="left: 50%;"></div>
                        <h3 class="popover-title" style="display: none;"></h3>
                        <div class="popover-content">必填</div>
                      </div>
                    </div>
              </div>
          </div>
          <div class="form-group">
              <label>充值地点：</label>
              <select class="form-control fk-cashInOut-select mps-gray" ng-change="manualPayStatus.selectProvince(manualPayStatus.editData.province)" ng-model="manualPayStatus.editData.province">
                <option ng-repeat="option in manualPayStatus.provinces" value="{{option.id}}">{{option.name}}</option>
              </select>
              <div class="has-error"
                    ng-messages="manualPayForm.aliPayName.$error"
                    ng-if="manualPayForm.aliPayName.$touched">
                    <div ng-message="required">
                      <div class="popover fade top in" role="tooltip" style="top: -30px;left: 92px;display: block; color: #ff0000;">
                        <div class="arrow" style="left: 50%;"></div>
                        <h3 class="popover-title" style="display: none;"></h3>
                        <div class="popover-content">必填</div>
                      </div>
                    </div>
              </div>
          </div>
          <div class="form-group">
              <label></label>
              <select class="form-control fk-cashInOut-select mps-gray" ng-change="manualPayStatus.selectCity(manualPayStatus.editData.city)" ng-model="manualPayStatus.editData.city">
                <option ng-repeat="option in manualPayStatus.cities" value="{{option.id}}">{{option.name}}</option>
              </select>
              <div class="has-error"
                    ng-messages="manualPayForm.aliPayName.$error"
                    ng-if="manualPayForm.aliPayName.$touched">
                    <div ng-message="required">
                      <div class="popover fade top in" role="tooltip" style="top: -30px;left: 92px;display: block; color: #ff0000;">
                        <div class="arrow" style="left: 50%;"></div>
                        <h3 class="popover-title" style="display: none;"></h3>
                        <div class="popover-content">必填</div>
                      </div>
                    </div>
              </div>
          </div>
          <div class="form-group">
              <label></label>
              <select class="form-control fk-cashInOut-select mps-gray" id="sel1" ng-model="manualPayStatus.editData.district">
                <option ng-repeat="option in manualPayStatus.districts" value="{{option.id}}">{{option.name}}</option>
              </select>
              <div class="has-error"
                    ng-messages="manualPayForm.aliPayName.$error"
                    ng-if="manualPayForm.aliPayName.$touched">
                    <div ng-message="required">
                      <div class="popover fade top in" role="tooltip" style="top: -30px;left: 92px;display: block; color: #ff0000;">
                        <div class="arrow" style="left: 50%;"></div>
                        <h3 class="popover-title" style="display: none;"></h3>
                        <div class="popover-content">必填</div>
                      </div>
                    </div>
              </div>
          </div>
          <div class="form-group">
              <label>充值金额 ：</label>
              <input type="number"
                     name="amount"
                     ng-model="manualPayStatus.editData.amount"
                     placeholder="100 - 10000"
                     class="form-control"
                     min = "100",
                     max = "10000"
                     required />
              <div
                    ng-messages="manualPayForm.amount.$error"
                    ng-if="manualPayForm.amount.$touched">
                    <div ng-message="min">
                      <div class="popover fade top in" role="tooltip" style="top: -30px;left: 92px;display: block; color: #ff0000;">
                        <div class="arrow" style="left: 50%;"></div>
                        <h3 class="popover-title" style="display: none;"></h3>
                        <div class="popover-content">必须介于100 - 10000</div>
                      </div>
                    </div>
                    <div ng-message="max">
                      <div class="popover fade top in" role="tooltip" style="top: -30px;left: 92px;display: block; color: #ff0000;">
                        <div class="arrow" style="left: 50%;"></div>
                        <h3 class="popover-title" style="display: none;"></h3>
                        <div class="popover-content">必须介于100 - 10000</div>
                      </div>
                    </div>
                    <div ng-message="required">
                      <div class="popover fade top in" role="tooltip" style="top: -30px;left: 92px;display: block; color: #ff0000;">
                        <div class="arrow" style="left: 50%;"></div>
                        <h3 class="popover-title" style="display: none;"></h3>
                        <div class="popover-content">必填</div>
                      </div>
                    </div>
              </div>
          </div>
          <div class="form-group">
              <label class="zIndex2">备注栏位 ：</label>
              <textarea name="remark"
                    ng-model="manualPayStatus.editData.remark"
                    placeholder=""
                    class="form-control inputText zIndex0 mps-textarea"
                    rows="5"
                    id="comment">
              </textarea>
          </div>
          <input type="submit"
                 class="btn btn-primary y btn-lg btn-block"
                 value="确认"
                 ng-click="manualPayStatus.manualTopUp()"
                 ng-disabled="manualPayForm.$invalid"
                 style="margin:30px 0 20px 0;"/>

        </form>
      </div>
      </div>
      <!-- end of apply manual pay -->
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="bankcardHint" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel1">充值说明</h4>
      </div>
      <div class="modal-body">
          1.发送订单 > 2.前往存款 > 3.成功到账
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
      </div>
    </div>
  </div>
</div>

<!--  Modal  -->
<div class="modal fade"
     id="manualPayModal"
     tabindex="-1"
     role="dialog"
     aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">手工充值提示</h4>
      </div>
      <div class="modal-body">

        <div ng-show="manualPayStatus.manualPayMessage">
          <div style="text-align: center;">
            {{manualPayStatus.manualPayMessage}}
          </div>
        </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
      </div>
    </div>
  </div>
</div>
