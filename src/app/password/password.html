<page-header title="'修改密码'" back="true" background="true" href="'#/user'"></page-header>

<div class="fk-password container-fluid">

  <div class="col-md-12">
    <span class="space"></span>
    <form class="fk-password-form" name="passwordForm">
      <div class="form-group">
        <label>旧密码:</label>
        <input
          type="password"
          name="oldPassword"
          ng-model="password.oldPassword"
          placeholder="请输入6-16位密码"
          class="form-control"
          required ng-minlength="6"
          ng-maxlength="16"/>
        <div class="has-error"
             ng-messages="passwordForm.oldPassword.$error"
             ng-if="passwordForm.oldPassword.$touched">
             <div ng-message="required">
               <div class="popover fade top in" role="tooltip" style="top: -30px;left: 92px;display: block; color: #ff0000;">
                 <div class="arrow" style="left: 50%;"></div>
                 <h3 class="popover-title" style="display: none;"></h3>
                 <div class="popover-content">必填</div>
               </div>
             </div>
             <div ng-message="maxlength">
               <div class="popover fade top in" role="tooltip" style="top: -30px;left: 92px;display: block; color: #ff0000;">
                 <div class="arrow" style="left: 50%;"></div>
                 <h3 class="popover-title" style="display: none;"></h3>
                 <div class="popover-content">6到16个字</div>
               </div>
             </div>
             <div ng-message="minlength">
               <div class="popover fade top in" role="tooltip" style="top: -30px;left: 92px;display: block; color: #ff0000;">
                 <div class="arrow" style="left: 50%;"></div>
                 <h3 class="popover-title" style="display: none;"></h3>
                 <div class="popover-content">6到16个字</div>
               </div>
             </div>
        </div>
      </div>
      <div class="form-group">
        <label>新密码:</label>
        <input
          type="password"
          name="newPassword"
          ng-model="password.newPassword"
          placeholder="请输入6-16位密码"
          class="form-control"
          required ng-minlength="6"
          ng-maxlength="16"/>
        <div class="has-error"
             ng-messages="passwordForm.newPassword.$error"
             ng-if="passwordForm.newPassword.$touched">
             <div ng-message="required">
               <div class="popover fade top in" role="tooltip" style="top: -30px;left: 92px;display: block; color: #ff0000;">
                 <div class="arrow" style="left: 50%;"></div>
                 <h3 class="popover-title" style="display: none;"></h3>
                 <div class="popover-content">必填</div>
               </div>
             </div>
             <div ng-message="maxlength">
               <div class="popover fade top in" role="tooltip" style="top: -30px;left: 92px;display: block; color: #ff0000;">
                 <div class="arrow" style="left: 50%;"></div>
                 <h3 class="popover-title" style="display: none;"></h3>
                 <div class="popover-content">6到16个字</div>
               </div>
             </div>
             <div ng-message="minlength">
               <div class="popover fade top in" role="tooltip" style="top: -30px;left: 92px;display: block; color: #ff0000;">
                 <div class="arrow" style="left: 50%;"></div>
                 <h3 class="popover-title" style="display: none;"></h3>
                 <div class="popover-content">6到16个字</div>
               </div>
             </div>
        </div>
      </div>
      <div class="form-group">
        <label>重复新密码:</label>
        <input type="password"
               name="confirmpass"
               ng-model="password.confirmPassword"
               placeholder="请重复输入密码"
               class="form-control"
               compare-to="password.newPassword">
        <div class="has-error" ng-messages="passwordForm.confirmpass.$error" ng-if="passwordForm.confirmpass.$touched">
          <div ng-message="compareTo">
            <div class="popover fade top in" role="tooltip" style="top: -30px;left: 92px;display: block; color: #ff0000;">
              <div class="arrow" style="left: 50%;"></div>
              <h3 class="popover-title" style="display: none;"></h3>
              <div class="popover-content">请重复输入密码</div>
            </div>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label>手机号:</label>
        <input type="text"
               name="confirmpass"
               ng-model="password.phoneNumber" disabled
               class="form-control">
      </div>


      <div class="form-group">
        <label>短信验证码:</label>
        <input type="text"
               name="confirmpass"
               ng-model="password.smsCode"
               placeholder="验证码"
               class="form-control"
               >
               <span class="btn btn-primary smsCodeBTN" ng-click="password.getSMSCode()" ng-disabled="password.countDown > 0">
                <span ng-hide="password.countDown > 0">获取验证码</span>
                <span ng-show="password.countDown > 0">{{password.countDown}}秒后重发</span>
               </span>

        <div class="has-error" ng-messages="passwordForm.confirmpass.$error" ng-if="passwordForm.confirmpass.$touched">
          <div ng-message="required">
            <div class="popover fade top in" role="tooltip" style="top: -30px;left: 92px;display: block; color: #ff0000;">
              <div class="arrow" style="left: 50%;"></div>
              <h3 class="popover-title" style="display: none;"></h3>
              <div class="popover-content">必填</div>
            </div>
          </div>
        </div>
      </div>
      <input type="submit"
             class="btn btn-primary y btn-lg btn-block"
             value="确认修改"
             ng-click="password.updatePassword()"
             ng-disabled="passwordForm.$invalid"
             style="margin-top:120px"/>
    </form>
  </div>
</div>

<!--  Modal  -->
<div class="modal fade"
     id="passwordModal"
     tabindex="-1"
     role="dialog"
     aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">提示</h4>
      </div>
      <div class="modal-body">
          <div style="text-align: center;">
            {{password.message}}
          </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
      </div>
    </div>
  </div>
</div>
